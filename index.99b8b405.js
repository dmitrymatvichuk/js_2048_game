const e=document.querySelector("button"),t=document.querySelector("tbody"),r=document.querySelector(".message-start"),n=document.querySelector(".message-lose"),o=document.querySelector(".message-win"),l=document.querySelector(".game-score");function s(){let e=[];for(let t=0;t<4;t++)e.push([0,0,0,0]);return e}let i=0,a=s();function c(){for(let e=0;e<4;e++)if(a[e].includes(0))return!0;return!1}function d(){let e;for(e=.1>Math.random()?4:2;c();){let t=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());if(0===a[t][r]){a[t][r]=e;break}}f()}function f(){for(let r=0;r<4;r++)for(let n=0;n<4;n++){let l=t.rows[r].cells[n],s=a[r][n];l.innerText="",l.classList.value="",l.classList.add("field-cell"),s>0&&(l.innerText=s,l.classList.add(`field-cell--${s}`)),2048===s&&(o.classList.remove("hidden"),e.classList.replace("restart","start"),e.innerText="Start")}l.innerText=i,function(){if(c())return!1;for(let e=0;e<4;e++)for(let t=0;t<3;t++)if(a[e][t]===a[e][t+1])return!1;for(let e=0;e<3;e++)for(let t=0;t<4;t++)if(a[e][t]===a[e+1][t])return!1;return!0}()&&n.classList.remove("hidden")}function u(e){for(let t=0;t<4;t++){let r;if("left"===e||"right"===e?r=a[t]:("up"===e||"down"===e)&&(r=[a[0][t],a[1][t],a[2][t],a[3][t]]),("right"===e||"down"===e)&&r.reverse(),r=function(e){let t=e.filter(e=>0!==e);for(let e=0;e<3;e++)t[e]===t[e+1]&&isFinite(t[e])&&(t[e]*=2,t[e+1]=0,i+=t[e]);for(t=t.filter(e=>0!==e);t.length<4;)t.push(0);return t}(r),("right"===e||"down"===e)&&r.reverse(),"left"===e||"right"===e)a[t]=r;else if("up"===e||"down"===e)for(let e=0;e<4;e++)a[e][t]=r[e]}}e.addEventListener("click",function(){a=s(),i=0,e.classList.replace("start","restart"),r.classList.add("hidden"),o.classList.add("hidden"),n.classList.add("hidden"),e.innerText="Restart",d(),d()}),document.addEventListener("keyup",e=>{let t=a.map(e=>e.slice());switch(e.preventDefault(),e.code){case"ArrowLeft":u("left");break;case"ArrowRight":u("right");break;case"ArrowUp":u("up");break;case"ArrowDown":u("down")}(function(e,t){for(let r=0;r<4;r++)for(let n=0;n<4;n++)if(e[r][n]!==t[r][n])return!0;return!1})(a,t)&&d(),f()});
//# sourceMappingURL=index.99b8b405.js.map
