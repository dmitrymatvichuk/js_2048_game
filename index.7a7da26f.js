!function(){var r=document.querySelector("button"),e=document.querySelector("tbody"),t=document.querySelector(".message-start"),n=document.querySelector(".message-lose"),a=document.querySelector(".message-win"),o=document.querySelector(".game-score");function i(){for(var r=[],e=0;e<4;e++)r.push([0,0,0,0]);return r}var s=0,c=i();function u(){for(var r=0;r<4;r++)if(c[r].includes(0))return!0;return!1}function f(){var r;for(r=.1>Math.random()?4:2;u();){var e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());if(0===c[e][t]){c[e][t]=r;break}}d()}function d(){for(var t=0;t<4;t++)for(var i=0;i<4;i++){var f=e.rows[t].cells[i],d=c[t][i];f.innerText="",f.classList.value="",f.classList.add("field-cell"),d>0&&(f.innerText=d,f.classList.add("field-cell--".concat(d))),2048===d&&(a.classList.remove("hidden"),r.classList.replace("restart","start"),r.innerText="Start")}o.innerText=s,function(){if(u())return!1;for(var r=0;r<4;r++)for(var e=0;e<3;e++)if(c[r][e]===c[r][e+1])return!1;for(var t=0;t<3;t++)for(var n=0;n<4;n++)if(c[t][n]===c[t+1][n])return!1;return!0}()&&n.classList.remove("hidden")}function l(r){for(var e=0;e<4;e++){var t=void 0;if("left"===r||"right"===r?t=c[e]:("up"===r||"down"===r)&&(t=[c[0][e],c[1][e],c[2][e],c[3][e]]),("right"===r||"down"===r)&&t.reverse(),t=function(r){for(var e=r.filter(function(r){return 0!==r}),t=0;t<3;t++)e[t]===e[t+1]&&isFinite(e[t])&&(e[t]*=2,e[t+1]=0,s+=e[t]);for(e=e.filter(function(r){return 0!==r});e.length<4;)e.push(0);return e}(t),("right"===r||"down"===r)&&t.reverse(),"left"===r||"right"===r)c[e]=t;else if("up"===r||"down"===r)for(var n=0;n<4;n++)c[n][e]=t[n]}}r.addEventListener("click",function(){c=i(),s=0,r.classList.replace("start","restart"),t.classList.add("hidden"),a.classList.add("hidden"),n.classList.add("hidden"),r.innerText="Restart",f(),f()}),document.addEventListener("keyup",function(r){var e=c.map(function(r){return r.slice()});switch(r.preventDefault(),r.code){case"ArrowLeft":l("left");break;case"ArrowRight":l("right");break;case"ArrowUp":l("up");break;case"ArrowDown":l("down")}(function(r,e){for(var t=0;t<4;t++)for(var n=0;n<4;n++)if(r[t][n]!==e[t][n])return!0;return!1})(c,e)&&f(),d()})}();
//# sourceMappingURL=index.7a7da26f.js.map
